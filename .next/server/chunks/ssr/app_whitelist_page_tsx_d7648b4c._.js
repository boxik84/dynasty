module.exports=[57393,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(3130),j=a.i(54161),k=a.i(50463),l=a.i(46143),m=a.i(16201),n=a.i(92e3),o=a.i(46842),p=a.i(41710),q=a.i(56468),r=a.i(4720),s=a.i(38246),t=a.i(23292);let u={basic:"Základní informace",motivation:"Motivace",roleplay:"Roleplay znalosti",rules_basic:"Pravidla - základní pojmy",rules_advanced:"Pravidla - pokročilé",specific_rules:"Specifická pravidla",scenarios:"Praktické scénáře",agreement:"Souhlas s pravidly",general:"Obecné otázky"};function v(){let a=(0,d.useRouter)(),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)({}),[F,G]=(0,c.useState)({}),[H,I]=(0,c.useState)("idle"),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch("/api/user/me",{cache:"no-store"}),c=await b.json();if(!c?.discordId)return void a.push("/sign-in");A(c);let d=await fetch("/api/whitelist-questions"),e=await d.json();if(d.ok){C(e.questions||[]),E(e.categories||{});let a={};e.questions.forEach(b=>{"checkbox"===b.field_type?a[b.field_name]=!1:(b.field_type,a[b.field_name]="")}),c.username&&(a.discordName=c.username),G(a)}let f=await fetch("/api/user/whitelist-requests"),g=await f.json();f.ok&&(O({totalAttempts:g.totalAttempts,remainingAttempts:g.remainingAttempts,maxAttempts:g.maxAttempts}),M(!!g.activeRequest))}catch(b){console.error("Chyba při načítání formuláře:",b),a.push("/sign-in")}finally{w(!1)}})()},[a]);let P=(a,b)=>{G(c=>({...c,[a]:b}))},Q=async a=>{a.preventDefault(),y(!0),I("idle"),K("");try{let a=await fetch("/api/whitelist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formData:F})}),b=await a.json();a.ok?(I("success"),M(!0),b.totalAttempts&&void 0!==b.remainingAttempts&&O({totalAttempts:b.totalAttempts,remainingAttempts:b.remainingAttempts,maxAttempts:b.maxAttempts||3}),t.toast.success("Žádost byla úspěšně odeslána!",{description:`Zb\xfdv\xe1 v\xe1m ${b.remainingAttempts||"neznámý počet"} pokusů. Budete informov\xe1ni o v\xfdsledku prostřednictv\xedm Discordu.`})):(I("error"),K(b.error||"Došlo k chybě při odesílání žádosti"),b.error?.includes("maximálního počtu pokusů")?t.toast.error("Dosáhli jste limitu pokusů",{description:"Vyčerpali jste všechny 3 pokusy na whitelist žádost."}):t.toast.error("Chyba při odesílání žádosti",{description:b.error||"Došlo k neočekávané chybě"}))}catch(a){I("error"),K("Došlo k chybě při odesílání žádosti"),t.toast.error("Chyba při odesílání žádosti",{description:"Došlo k neočekávané chybě"}),console.error("Error submitting whitelist:",a)}finally{y(!1)}};if(v)return(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-[#b90505]/10 blur-3xl"})}),(0,b.jsxs)("div",{className:"relative z-10 w-full max-w-2xl mx-auto p-4 sm:p-6",children:[(0,b.jsx)(k.Skeleton,{className:"h-8 w-48 mb-8 bg-white/5"}),(0,b.jsx)(k.Skeleton,{className:"w-full h-96 bg-white/5 rounded-2xl"})]})]});if(!z)return null;let R=process.env.DISCORD_WAITING_ROLE_ID,S=process.env.DISCORD_BLACKLISTED_ROLE_ID,T=z.roles.includes(S),U=z.roles.includes(R),V=z.hasWhitelist;return T?(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-red-500/10 blur-3xl"})}),(0,b.jsx)("div",{className:"relative z-10 w-full max-w-md mx-auto p-4",children:(0,b.jsx)(i.Card,{className:"bg-gradient-to-br from-red-950/50 via-red-900/50 to-red-950/50 border-red-500/30",children:(0,b.jsxs)(i.CardHeader,{className:"text-center",children:[(0,b.jsx)(q.Ban,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)(i.CardTitle,{className:"text-red-400",children:"Přístup zamítnut"}),(0,b.jsx)(i.CardDescription,{className:"text-red-300",children:"Váš účet je na blacklistu a nemůžete podat žádost o whitelist."})]})})})]}):V?(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-green-500/10 blur-3xl"})}),(0,b.jsx)("div",{className:"relative z-10 w-full max-w-md mx-auto p-4",children:(0,b.jsxs)(i.Card,{className:"bg-gradient-to-br from-green-950/50 via-green-900/50 to-green-950/50 border-green-500/30",children:[(0,b.jsxs)(i.CardHeader,{className:"text-center",children:[(0,b.jsx)(m.CheckCircle,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,b.jsx)(i.CardTitle,{className:"text-green-400",children:"Whitelist aktivní"}),(0,b.jsx)(i.CardDescription,{className:"text-green-300",children:"Již máte aktivní whitelist a můžete se připojit na server."})]}),(0,b.jsx)(i.CardContent,{className:"text-center",children:(0,b.jsx)(f.Button,{onClick:()=>a.push("/dashboard"),className:"bg-green-600 hover:bg-green-700",children:"Přejít do dashboardu"})})]})})]}):U||L?(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-yellow-500/10 blur-3xl"})}),(0,b.jsx)("div",{className:"relative z-10 w-full max-w-md mx-auto p-4",children:(0,b.jsx)(i.Card,{className:"bg-gradient-to-br from-yellow-950/50 via-yellow-900/50 to-yellow-950/50 border-yellow-500/30",children:(0,b.jsxs)(i.CardHeader,{className:"text-center",children:[(0,b.jsx)(p.Clock,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),(0,b.jsx)(i.CardTitle,{className:"text-yellow-400",children:"Čeká na schválení"}),(0,b.jsx)(i.CardDescription,{className:"text-yellow-300",children:"Vaše žádost o whitelist čeká na schválení administrátory."})]})})})]}):(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a]",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/3 top-1/4 z-0",children:(0,b.jsx)("div",{className:"h-[600px] w-[800px] rounded-full bg-[#b90505]/8 blur-3xl"})}),(0,b.jsx)("div",{className:"pointer-events-none absolute right-1/4 bottom-1/3 z-0",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-[#b90505]/5 blur-3xl"})}),(0,b.jsxs)("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 max-w-2xl",children:[N&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.7},className:"mb-6",children:(0,b.jsxs)(i.Card,{className:"bg-gradient-to-br from-blue-950/30 via-blue-900/30 to-blue-950/30 border-blue-500/20",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)(i.CardTitle,{className:"text-blue-400 flex items-center gap-2",children:[(0,b.jsx)(r.FileText,{className:"h-5 w-5"}),"Informace o pokusech"]})}),(0,b.jsxs)(i.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-blue-300",children:[N.totalAttempts," / ",N.maxAttempts]}),(0,b.jsx)("p",{className:"text-blue-200 text-sm",children:"Využité pokusy"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-300",children:N.remainingAttempts}),(0,b.jsx)("p",{className:"text-green-200 text-sm",children:"Zbývající pokusy"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-300",children:L?"Ano":"Ne"}),(0,b.jsx)("p",{className:"text-yellow-200 text-sm",children:"Aktivní žádost"})]})]}),0===N.remainingAttempts&&(0,b.jsx)("div",{className:"mt-4 p-3 bg-red-950/50 border border-red-500/30 rounded-lg",children:(0,b.jsx)("p",{className:"text-red-300 text-sm",children:"⚠️ Vyčerpali jste všechny pokusy na whitelist žádost. Nemůžete podat další žádost."})})]})]})}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},children:(0,b.jsxs)(i.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 backdrop-blur-md",children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{className:"text-white",children:"Whitelist formulář"}),(0,b.jsxs)(i.CardDescription,{children:["Všechna pole jsou povinná. Odpovězte podle pravidel serveru dostupných na"," ",(0,b.jsx)(s.default,{href:"https://retrovax-pravidla.gitbook.io/retrovax-fivem-pravidla",target:"_blank",rel:"noopener noreferrer",className:"text-[#b90505] hover:text-[#d40606] underline",children:"retrovax-pravidla.gitbook.io"})]})]}),(0,b.jsx)(i.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)(j.Badge,{variant:"outline",className:"border-[#b90505]/60 text-[#bd2727] bg-[#b90505]/10 px-4 py-1 font-semibold tracking-wide backdrop-blur flex gap-2 mx-auto w-fit mb-4",children:[(0,b.jsx)(o.User,{className:"h-4 w-4 text-[#bd2727] drop-shadow-[0_0_5px_#bd2727]"}),z.username]}),(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Žádost o Whitelist"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-400 max-w-md mx-auto",children:"Vyplňte formulář níže pro získání přístupu na náš roleplay server"})]}),"success"===H&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-green-950/50 border border-green-500/30 rounded-lg p-4 text-center",children:[(0,b.jsx)(m.CheckCircle,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-green-400 font-medium",children:"Žádost byla úspěšně odeslána!"}),(0,b.jsx)("p",{className:"text-green-300 text-sm mt-1",children:"Budete informováni o výsledku prostřednictvím Discordu."})]}),"error"===H&&(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-950/50 border border-red-500/30 rounded-lg p-4 text-center",children:[(0,b.jsx)(n.AlertCircle,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-red-400 font-medium",children:"Chyba při odesílání"}),(0,b.jsx)("p",{className:"text-red-300 text-sm mt-1",children:J})]}),(0,b.jsxs)("form",{onSubmit:Q,className:"space-y-4 sm:space-y-6",children:[Object.entries(D).map(([a,c])=>(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/10 pb-2",children:u[a]||a}),c.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:["checkbox"!==a.field_type&&(0,b.jsxs)(h.Label,{htmlFor:a.field_name,className:"text-white",children:[a.question,a.required&&(0,b.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(a=>{let c=F[a.field_name]||"";switch(a.field_type){case"text":case"url":return(0,b.jsx)(g.Input,{id:a.field_name,name:a.field_name,type:"url"===a.field_type?"url":"text",value:c,onChange:b=>P(a.field_name,b.target.value),required:a.required,placeholder:a.placeholder,minLength:a.min_length,maxLength:a.max_length,className:"bg-white/5 border-white/10 text-white"});case"number":return(0,b.jsx)(g.Input,{id:a.field_name,name:a.field_name,type:"number",value:c,onChange:b=>P(a.field_name,b.target.value),required:a.required,placeholder:a.placeholder,min:a.min_value,max:a.max_value,className:"bg-white/5 border-white/10 text-white"});case"textarea":return(0,b.jsx)("textarea",{id:a.field_name,name:a.field_name,value:c,onChange:b=>P(a.field_name,b.target.value),required:a.required,placeholder:a.placeholder,minLength:a.min_length,maxLength:a.max_length,rows:a.min_length&&a.min_length>50?4:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#b90505]/50 focus:border-transparent resize-none"});case"checkbox":return(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:a.field_name,checked:!!c,onCheckedChange:b=>P(a.field_name,!!b),required:a.required}),(0,b.jsx)(h.Label,{htmlFor:a.field_name,className:"text-white text-sm",children:a.question})]});default:return null}})(a)]},a.id))]},a)),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"pt-6",children:[(0,b.jsx)(f.Button,{type:"submit",disabled:x||N?.remainingAttempts===0,className:"w-full bg-gradient-to-r from-[#b90505] to-[#d40606] hover:from-[#a00404] hover:to-[#b90505] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-[#b90505]/25 hover:shadow-[#b90505]/40 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Odesílání..."]}):"Odeslat žádost"}),N?.remainingAttempts===0&&(0,b.jsx)("p",{className:"text-red-400 text-sm text-center mt-2",children:"Vyčerpali jste všechny pokusy na whitelist žádost"})]})]})]})})]})})]})]})}a.s(["default",()=>v])}];

//# sourceMappingURL=app_whitelist_page_tsx_d7648b4c._.js.map