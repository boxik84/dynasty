module.exports=[47468,a=>{"use strict";var b=a.i(2470),c=a.i(76972),d=a.i(3130),e=a.i(28224),f=a.i(54161),g=a.i(5522),h=a.i(7706),i=a.i(87682),j=a.i(65733),k=a.i(76504),l=a.i(64940),m=a.i(64986),n=a.i(9515),o=a.i(95440),p=a.i(47022),q=a.i(91440),r=a.i(4061),s=a.i(32636),t=a.i(38319),u=a.i(54086),v=a.i(34845);let w=(0,v.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var x=a.i(48744),y=a.i(80889);let z=(0,v.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var A=a.i(68919),B=a.i(58880),C=a.i(80833),D=a.i(11475),E=a.i(56916);function F(){let[a,v]=(0,c.useState)([]),[F,G]=(0,c.useState)({totalUsers:0,activeUsers:0,adminUsers:0,blacklistedUsers:0}),[H,I]=(0,c.useState)(!0),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)("all"),[N,O]=(0,c.useState)("all"),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{Z()},[]);let Z=async(a=!1)=>{a||I(!0);try{let b=await fetch("/api/admin/users");if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||"Failed to fetch users")}let c=await b.json();v(c.users||[]),G({totalUsers:c.totalUsers||0,activeUsers:c.activeUsers||0,adminUsers:c.adminUsers||0,blacklistedUsers:c.blacklistedUsers||0}),a&&E.toast.success("Uživatelé úspěšně obnoveni")}catch(a){console.error("Error fetching users:",a),E.toast.error(a.message||"Chyba při načítání uživatelů")}finally{a||I(!1)}},$=async()=>{if(R){U(!0);try{let a=await fetch("/api/admin/users",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:R.id})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to delete user")}E.toast.success("Uživatel byl úspěšně smazán"),Q(!1),S(null),await Z()}catch(a){console.error("Error deleting user:",a),E.toast.error(a.message||"Chyba při mazání uživatele")}finally{U(!1)}}},_=a=>a.permissions.isBlacklisted?(0,b.jsxs)(f.Badge,{variant:"destructive",className:"text-xs",children:[(0,b.jsx)(B.Ban,{className:"h-3 w-3 mr-1"}),"Blacklisted"]}):a.permissions.hasVedeniRole?(0,b.jsxs)(f.Badge,{className:"bg-red-500/20 text-red-400 border-red-500/30 text-xs",children:[(0,b.jsx)(p.Crown,{className:"h-3 w-3 mr-1"}),"Vedení"]}):a.permissions.hasDeveloperRole?(0,b.jsxs)(f.Badge,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30 text-xs",children:[(0,b.jsx)(q.Code,{className:"h-3 w-3 mr-1"}),"Developer"]}):a.permissions.hasStaffRole?(0,b.jsxs)(f.Badge,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:[(0,b.jsx)(n.Shield,{className:"h-3 w-3 mr-1"}),"Staff"]}):(0,b.jsxs)(f.Badge,{className:"bg-gray-500/20 text-gray-400 border-gray-500/30 text-xs",children:[(0,b.jsx)(o.User,{className:"h-3 w-3 mr-1"}),"Uživatel"]}),aa=a.filter(a=>{let b=a.name?.toLowerCase().includes(J.toLowerCase())||a.email?.toLowerCase().includes(J.toLowerCase())||a.discordId?.includes(J),c="all"===L||"admin"===L&&a.permissions.isAdmin||"staff"===L&&a.permissions.hasStaffRole||"user"===L&&!a.permissions.isAdmin&&!a.permissions.hasStaffRole||"blacklisted"===L&&a.permissions.isBlacklisted,d="all"===N||"online"===N&&a.activeSessions>0||"offline"===N&&0===a.activeSessions;return b&&c&&d});return H?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-[#b90505] border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(C.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-[#b90505]/20 to-[#bd2727]/10 text-[#bd2727] border border-[#b90505]/30 shadow-lg",children:(0,b.jsx)(l.Users,{className:"h-8 w-8"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Správa uživatelů"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Spravujte uživatelské účty a oprávnění"})]})]}),(0,b.jsx)(e.Button,{onClick:()=>Z(!0),className:"border-[#b90505]/40 text-[#bd2727] hover:bg-[#b90505]/10 bg-transparent",children:"Obnovit"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4 text-[#bd2727]"}),(0,b.jsxs)("span",{className:"text-sm text-gray-400",children:[F.totalUsers," celkem • ",F.activeUsers," aktivních • ",F.adminUsers," administrátorů"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6 mb-6",children:[(0,b.jsx)(d.Card,{className:"bg-gradient-to-br from-blue-950/30 via-blue-900/30 to-blue-950/30 border-blue-500/20",children:(0,b.jsxs)(d.CardContent,{className:"p-3 lg:p-4",children:[(0,b.jsx)("div",{className:"text-xl lg:text-2xl font-bold text-blue-300",children:F.totalUsers}),(0,b.jsx)("p",{className:"text-blue-200 text-xs lg:text-sm",children:"Celkem uživatelů"})]})}),(0,b.jsx)(d.Card,{className:"bg-gradient-to-br from-green-950/30 via-green-900/30 to-green-950/30 border-green-500/20",children:(0,b.jsxs)(d.CardContent,{className:"p-3 lg:p-4",children:[(0,b.jsx)("div",{className:"text-xl lg:text-2xl font-bold text-green-300",children:F.activeUsers}),(0,b.jsx)("p",{className:"text-green-200 text-xs lg:text-sm",children:"Aktivní uživatelé"})]})}),(0,b.jsx)(d.Card,{className:"bg-gradient-to-br from-purple-950/30 via-purple-900/30 to-purple-950/30 border-purple-500/20",children:(0,b.jsxs)(d.CardContent,{className:"p-3 lg:p-4",children:[(0,b.jsx)("div",{className:"text-xl lg:text-2xl font-bold text-purple-300",children:F.adminUsers}),(0,b.jsx)("p",{className:"text-purple-200 text-xs lg:text-sm",children:"Administrátoři"})]})}),(0,b.jsx)(d.Card,{className:"bg-gradient-to-br from-red-950/30 via-red-900/30 to-red-950/30 border-red-500/20",children:(0,b.jsxs)(d.CardContent,{className:"p-3 lg:p-4",children:[(0,b.jsx)("div",{className:"text-xl lg:text-2xl font-bold text-red-300",children:F.blacklistedUsers}),(0,b.jsx)("p",{className:"text-red-200 text-xs lg:text-sm",children:"Blacklisted"})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 lg:gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(g.Input,{placeholder:"Hledat uživatele...",value:J,onChange:a=>K(a.target.value),className:"pl-10 bg-white/5 border-white/10 text-white text-sm lg:text-base"})]}),(0,b.jsxs)("div",{className:"flex gap-2 lg:gap-3",children:[(0,b.jsxs)(i.Select,{value:L,onValueChange:M,children:[(0,b.jsxs)(i.SelectTrigger,{className:"w-32 lg:w-40 bg-white/5 border-white/10 text-white text-sm lg:text-base",children:[(0,b.jsx)(z,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(i.SelectValue,{})]}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Všechny role"}),(0,b.jsx)(i.SelectItem,{value:"admin",children:"Administrátoři"}),(0,b.jsx)(i.SelectItem,{value:"staff",children:"Staff"}),(0,b.jsx)(i.SelectItem,{value:"user",children:"Uživatelé"}),(0,b.jsx)(i.SelectItem,{value:"blacklisted",children:"Blacklisted"})]})]}),(0,b.jsxs)(i.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-24 lg:w-32 bg-white/5 border-white/10 text-white text-sm lg:text-base",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"Všichni"}),(0,b.jsx)(i.SelectItem,{value:"online",children:"Online"}),(0,b.jsx)(i.SelectItem,{value:"offline",children:"Offline"})]})]})]})]})]}),(0,b.jsx)(C.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:(0,b.jsx)(D.AnimatePresence,{children:aa.map((a,c)=>(0,b.jsx)(C.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3,delay:.05*c},layout:!0,children:(0,b.jsxs)(d.Card,{className:"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10 hover:border-[#b90505]/30 transition-all duration-300 group",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(h.Avatar,{className:"h-10 w-10 lg:h-12 lg:w-12",children:[(0,b.jsx)(h.AvatarImage,{src:a.image,alt:a.name}),(0,b.jsx)(h.AvatarFallback,{className:"bg-gradient-to-br from-[#bd2727] to-[#b90505] text-white font-bold",children:a.name?.charAt(0)?.toUpperCase()||"U"})]}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-white text-sm lg:text-base truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-400 break-all",children:a.discordId?`Discord: ${a.discordId}`:a.email})]})]}),(0,b.jsxs)(k.DropdownMenu,{children:[(0,b.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)("button",{className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-white/10 rounded-md flex items-center justify-center",children:(0,b.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(k.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsx)(k.DropdownMenuLabel,{children:"Akce"}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>{W(a),Y(!0)},children:[(0,b.jsx)(A.Eye,{className:"h-4 w-4 mr-2"}),"Zobrazit detail"]}),(0,b.jsx)(k.DropdownMenuSeparator,{}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>{S(a),Q(!0)},className:"text-red-400 focus:text-red-400",children:[(0,b.jsx)(s.Trash2,{className:"h-4 w-4 mr-2"}),"Smazat uživatele"]})]})]})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Role:"}),_(a)]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Status:"}),a.activeSessions>0?(0,b.jsxs)(f.Badge,{className:"bg-green-500/20 text-green-400 border-green-500/30 text-xs",children:[(0,b.jsx)(y.Activity,{className:"h-3 w-3 mr-1"}),"Online"]}):(0,b.jsx)(f.Badge,{className:"bg-gray-500/20 text-gray-400 border-gray-500/30 text-xs",children:"Offline"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Sessions:"}),(0,b.jsx)("span",{className:"text-xs text-gray-300",children:a.activeSessions})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Registrován:"}),(0,b.jsx)("span",{className:"text-xs text-gray-300",children:new Date(a.createdAt).toLocaleDateString("cs-CZ")})]}),a.permissions.isBlacklisted&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,b.jsx)(t.AlertTriangle,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:"text-xs text-red-400",children:"Blacklisted uživatel"})]})]})]})},a.id))})}),0===aa.length&&(0,b.jsxs)(C.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[(0,b.jsx)(l.Users,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"Žádní uživatelé nenalezeni"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Zkuste upravit vyhledávací kritéria nebo filtry"})]}),(0,b.jsx)(j.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(j.DialogContent,{className:"bg-gradient-to-br from-[#131618]/95 via-[#151a1c]/95 to-[#111b22]/95 border-white/10",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsxs)(j.DialogTitle,{className:"text-white flex items-center gap-2",children:[(0,b.jsx)(t.AlertTriangle,{className:"h-5 w-5 text-red-400"}),"Smazat uživatele"]}),(0,b.jsxs)(j.DialogDescription,{className:"text-gray-400",children:["Opravdu chcete smazat uživatele"," ",(0,b.jsx)("span",{className:"font-semibold text-white",children:R?.name}),"?",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"Tato akce:",(0,b.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,b.jsx)("li",{children:"Smaže uživatelský účet"}),(0,b.jsx)("li",{children:"Ukončí všechny aktivní session"}),(0,b.jsx)("li",{children:"Smaže whitelist žádosti"}),(0,b.jsx)("li",{children:"Nelze vrátit zpět"})]})]})]}),(0,b.jsxs)(j.DialogFooter,{children:[(0,b.jsx)("button",{onClick:()=>Q(!1),disabled:T,className:"border border-white/20 text-white hover:bg-white/10 px-4 py-2 rounded-md bg-transparent",children:"Zrušit"}),(0,b.jsxs)(e.Button,{onClick:$,disabled:T,className:"bg-red-600 hover:bg-red-700 text-white",children:[T?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,b.jsx)(s.Trash2,{className:"h-4 w-4 mr-2"}),T?"Mazání...":"Smazat"]})]})]})}),(0,b.jsx)(j.Dialog,{open:X,onOpenChange:Y,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-2xl bg-gradient-to-br from-[#131618]/95 via-[#151a1c]/95 to-[#111b22]/95 border-white/10",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsxs)(j.DialogTitle,{className:"text-white flex items-center gap-3",children:[(0,b.jsxs)(h.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(h.AvatarImage,{src:V?.image,alt:V?.name}),(0,b.jsx)(h.AvatarFallback,{className:"bg-gradient-to-br from-[#bd2727] to-[#b90505] text-white font-bold text-sm",children:V?.name?.charAt(0)?.toUpperCase()||"U"})]}),"Detail uživatele"]}),(0,b.jsxs)(j.DialogDescription,{className:"text-gray-400",children:["Kompletní informace o uživateli ",V?.name]})]}),V&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Jméno"}),(0,b.jsx)("p",{className:"text-white",children:V.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Email"}),(0,b.jsx)("p",{className:"text-white break-all",children:V.email||"Není nastaveno"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Discord ID"}),(0,b.jsx)("p",{className:"text-white",children:V.discordId||"Není propojeno"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Email ověřen"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[V.emailVerified?(0,b.jsx)(u.UserCheck,{className:"h-4 w-4 text-green-400"}):(0,b.jsx)(w,{className:"h-4 w-4 text-red-400"}),(0,b.jsx)("span",{className:"text-white",children:V.emailVerified?"Ano":"Ne"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Role"}),(0,b.jsx)("div",{className:"mt-1",children:_(V)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Aktivní sessions"}),(0,b.jsx)("p",{className:"text-white",children:V.activeSessions})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Registrace"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Calendar,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-white",children:new Date(V.createdAt).toLocaleString("cs-CZ")})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Poslední aktivita"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(y.Activity,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-white",children:new Date(V.updatedAt).toLocaleString("cs-CZ")})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-400",children:"Oprávnění"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[V.permissions.isAdmin&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-red-500/30 text-red-400",children:[(0,b.jsx)(p.Crown,{className:"h-3 w-3 mr-1"}),"Admin"]}),V.permissions.hasVedeniRole&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-purple-500/30 text-purple-400",children:[(0,b.jsx)(p.Crown,{className:"h-3 w-3 mr-1"}),"Vedení"]}),V.permissions.hasDeveloperRole&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-blue-500/30 text-blue-400",children:[(0,b.jsx)(q.Code,{className:"h-3 w-3 mr-1"}),"Developer"]}),V.permissions.hasStaffRole&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-green-500/30 text-green-400",children:[(0,b.jsx)(n.Shield,{className:"h-3 w-3 mr-1"}),"Staff"]}),V.permissions.isBlacklisted&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"border-red-500/30 text-red-400",children:[(0,b.jsx)(B.Ban,{className:"h-3 w-3 mr-1"}),"Blacklisted"]})]})]})]})]})})]})}a.s(["default",()=>F],47468)}];

//# sourceMappingURL=app_admin_users_page_tsx_4f85054f._.js.map