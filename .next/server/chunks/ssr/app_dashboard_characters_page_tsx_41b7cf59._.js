module.exports=[23506,a=>{"use strict";var b=a.i(2470),c=a.i(76972),d=a.i(6328),e=a.i(37355),f=a.i(3130),g=a.i(54161),h=a.i(50463),i=a.i(7379),j=a.i(92134),k=a.i(80833),l=a.i(56916),m=a.i(95440),n=a.i(48744),o=a.i(75359),p=a.i(34845);let q=(0,p.default)("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);var r=a.i(64940);let s=(0,p.default)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var t=a.i(68919),u=a.i(51007);let v=(0,p.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var w=a.i(47022),x=a.i(80889);function y(){let a=(0,d.useRouter)(),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,t]=(0,c.useState)(!0),{data:u,isPending:w}=j.authClient.useSession();return((0,c.useEffect)(()=>{(async()=>{if(!w){if(!u?.user?.id)return a.push("/sign-in");try{let b=await fetch("/api/user/me",{cache:"no-store"}),c=await b.json();if(!c?.discordId){l.toast.error("Nepodařilo se načíst uživatelská data"),a.push("/sign-in");return}if(n(c),c.hasWhitelist||c.permissions?.hasWhitelistPermissions){let a=await fetch(`/api/postavy?discordId=${c.discordId}`);if(a.ok){let b=await a.json();p(b.postavy||[]),b.postavy&&b.postavy.length>0&&l.toast.success(`Načteno ${b.postavy.length} postav`)}else l.toast.error("Chyba při načítání postav")}}catch(b){console.error("Chyba při načítání dat:",b),l.toast.error("Nastala chyba při načítání dat"),a.push("/sign-in")}finally{t(!1)}}})()},[w,u,a]),q||!m)?(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a]",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-[#b90505]/8 blur-3xl"})}),(0,b.jsxs)("div",{className:"relative z-10 space-y-6 px-4 md:px-0",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-48 bg-white/5"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-96 bg-white/5"})]}),(0,b.jsx)(i.Separator,{className:"bg-white/10"}),(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)(f.Card,{className:"bg-white/5 border border-white/10 rounded-2xl",children:[(0,b.jsxs)(f.CardHeader,{className:"space-y-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-1/2 bg-white/10"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-1/3 bg-white/10"})]}),(0,b.jsxs)(f.CardContent,{className:"space-y-3",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-full bg-white/10"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-full bg-white/10"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-full bg-white/10"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-full bg-white/10"})]})]},c))})]})]}):(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a]",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[800px] rounded-full bg-[#b90505]/8 blur-3xl"})}),(0,b.jsx)("div",{className:"pointer-events-none absolute right-1/3 bottom-1/3 z-0",children:(0,b.jsx)("div",{className:"h-[300px] w-[500px] rounded-full bg-[#b90505]/5 blur-3xl"})}),(0,b.jsxs)("div",{className:"relative z-10 space-y-8 px-4 md:px-0",children:[(0,b.jsxs)(k.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,b.jsxs)(g.Badge,{variant:"outline",className:"border-[#b90505]/60 text-[#bd2727] bg-[#b90505]/10 px-4 py-1 font-semibold tracking-wide backdrop-blur flex gap-2",children:[(0,b.jsx)(r.Users,{className:"h-4 w-4 text-[#bd2727] drop-shadow-[0_0_5px_#bd2727]"}),"Moje postavy"]})}),(0,b.jsx)("h1",{className:"text-3xl md:text-5xl font-extrabold text-white text-center drop-shadow",children:"Správa postav"}),(0,b.jsx)("p",{className:"text-lg text-gray-400 text-center max-w-2xl mx-auto",children:"Spravujte své postavy a sledujte jejich detaily, bankovní účty a aktivity."})]}),(0,b.jsx)(i.Separator,{className:"bg-white/10"}),(0,b.jsx)(k.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:"easeOut"},children:m.hasWhitelist||m.permissions?.hasWhitelistPermissions?o.length>0?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)(f.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-[#b90505]/20 text-[#bd2727]",children:(0,b.jsx)(r.Users,{className:"h-5 w-5 drop-shadow-[0_0_5px_#bd2727]"})}),(0,b.jsx)(f.CardTitle,{className:"text-white text-sm",children:"Celkem postav"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-[#bd2727]",children:o.length})})]}),(0,b.jsxs)(f.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-500/20 text-green-400",children:(0,b.jsx)(v,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(f.CardTitle,{className:"text-white text-sm",children:"Celkové bohatství"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("p",{className:"text-3xl font-bold text-green-400",children:["$",o.reduce((a,b)=>{try{let c=JSON.parse(b.accounts||"{}");return a+(c.bank||0)+(c.money||0)}catch{return a}},0).toLocaleString()]})})]}),(0,b.jsxs)(f.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(f.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/20 text-purple-400",children:(0,b.jsx)(x.Activity,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(f.CardTitle,{className:"text-white text-sm",children:"Poslední aktivita"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-gray-300",children:new Date(Math.max(...o.map(a=>new Date(a.last_seen).getTime()))).toLocaleDateString("cs-CZ")})})]})]}),(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 xl:grid-cols-3",children:o.map((a,c)=>(0,b.jsx)(k.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*c},children:(0,b.jsx)(e.default,{href:`/dashboard/characters/${a.identifier}`,children:(0,b.jsx)(z,{character:a})})},a.identifier))})]}):(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md max-w-md mx-auto",children:(0,b.jsxs)(f.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto p-3 rounded-full bg-[#b90505]/20 text-[#bd2727] w-fit mb-4",children:(0,b.jsx)(r.Users,{className:"h-8 w-8 drop-shadow-[0_0_5px_#bd2727]"})}),(0,b.jsx)(f.CardTitle,{className:"text-xl text-white",children:"Žádné postavy"}),(0,b.jsx)(f.CardDescription,{className:"text-gray-400",children:"Zatím nemáte vytvořené žádné postavy. Připojte se na server a vytvořte si svou první postavu!"})]})}):(0,b.jsx)(f.Card,{className:"bg-gradient-to-br from-red-900/20 via-red-800/20 to-red-900/30 border border-red-500/20 shadow-xl rounded-2xl backdrop-blur-md max-w-md mx-auto",children:(0,b.jsxs)(f.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto p-3 rounded-full bg-red-500/20 text-red-400 w-fit mb-4",children:(0,b.jsx)(s,{className:"h-8 w-8"})}),(0,b.jsx)(f.CardTitle,{className:"text-xl text-red-400",children:"Přístup odepřen"}),(0,b.jsx)(f.CardDescription,{className:"text-gray-400",children:m?.discordId?"Nemáte potřebný whitelist pro přístup k postavám.":"Propojte svůj Discord účet pro zobrazení postav."})]})})})]})]})}let z=({character:a})=>{let c;try{c=JSON.parse(a.accounts||"{}")}catch{c={bank:0,money:0}}let d="m"===a.sex,h=(c.bank||0)+(c.money||0),i=new Date(a.created_at),j=Math.floor((Date.now()-i.getTime())/864e5);return(0,b.jsxs)(f.Card,{className:"group bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 hover:border-white/20 shadow-xl rounded-2xl backdrop-blur-md transition-all duration-300 hover:scale-105 cursor-pointer",children:[(0,b.jsx)(f.CardHeader,{className:"pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(f.CardTitle,{className:"text-xl font-bold text-white group-hover:text-[#bd2727] transition-colors",children:[a.firstname," ",a.lastname]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Badge,{className:`${d?"bg-blue-500/20 text-blue-300 border-blue-500/40":"bg-pink-500/20 text-pink-300 border-pink-500/40"} border`,children:[(0,b.jsx)(m.User,{className:"w-3 h-3 mr-1"}),d?"Muž":"Žena"]}),(0,b.jsxs)(g.Badge,{className:"bg-purple-500/20 text-purple-300 border-purple-500/40 border",children:[(0,b.jsx)(q,{className:"w-3 h-3 mr-1"}),a.height," cm"]})]})]}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-[#b90505]/20 text-[#bd2727]",children:(0,b.jsx)(t.Eye,{className:"h-5 w-5 drop-shadow-[0_0_5px_#bd2727]"})})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsx)(e.default,{href:`/dashboard/characters/bank?character=${a.identifier}`,children:(0,b.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 hover:border-green-400/30 transition-all duration-300 cursor-pointer group",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-400 group-hover:text-gray-300",children:"Celkové bohatství"}),(0,b.jsx)(o.DollarSign,{className:"h-4 w-4 text-green-400 group-hover:drop-shadow-[0_0_5px_currentColor]"})]}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-green-400 group-hover:text-green-300",children:["$",A(h)]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2 group-hover:text-gray-400",children:[(0,b.jsxs)("span",{children:["Banka: $",A(c.bank||0)]}),(0,b.jsxs)("span",{children:["Hotovost: $",A(c.money||0)]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-600 group-hover:text-gray-500 mt-1 text-center opacity-0 group-hover:opacity-100 transition-opacity",children:"Klikněte pro detaily transakcí"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-gray-400",children:"Datum narození"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4 text-[#bd2727]"}),(0,b.jsx)("span",{className:"text-gray-300",children:new Date(a.dateofbirth).toLocaleDateString("cs-CZ")})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-gray-400",children:"Věk postavy"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Clock,{className:"h-4 w-4 text-orange-400"}),(0,b.jsxs)("span",{className:"text-gray-300",children:[j," dní"]})]})]})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Naposledy viděn"}),(0,b.jsx)("span",{className:"text-xs text-gray-300",children:new Date(a.last_seen).toLocaleString("cs-CZ")})]})}),a.iban&&(0,b.jsx)("div",{className:"p-3 rounded-lg bg-[#b90505]/10 border border-[#b90505]/30",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Crown,{className:"h-4 w-4 text-[#bd2727] drop-shadow-[0_0_3px_#bd2727]"}),(0,b.jsxs)("span",{className:"text-xs text-[#bd2727] font-medium",children:["IBAN: ",a.iban]})]})})]})]})};function A(a){return a>=1e3?a.toLocaleString():a.toString()}a.s(["default",()=>y],23506)}];

//# sourceMappingURL=app_dashboard_characters_page_tsx_41b7cf59._.js.map