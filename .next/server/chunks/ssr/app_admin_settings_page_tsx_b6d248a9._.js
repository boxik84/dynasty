module.exports=[81502,a=>{"use strict";var b=a.i(2470),c=a.i(76972),d=a.i(3130),e=a.i(28224),f=a.i(5522),g=a.i(17171),h=a.i(59653),i=a.i(5331),j=a.i(31168),k=a.i(68734),l=a.i(93145),m=a.i(91204),n=a.i(6254),o="Switch",[p,q]=(0,j.createContextScope)(o),[r,s]=p(o),t=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:j,required:l,disabled:m,value:p="on",onCheckedChange:q,form:s,...t}=a,[u,v]=c.useState(null),y=(0,i.useComposedRefs)(d,a=>v(a)),z=c.useRef(!1),A=!u||s||!!u.closest("form"),[B,C]=(0,k.useControllableState)({prop:g,defaultProp:j??!1,onChange:q,caller:o});return(0,b.jsxs)(r,{scope:e,checked:B,disabled:m,children:[(0,b.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":l,"data-state":x(B),"data-disabled":m?"":void 0,disabled:m,value:p,...t,ref:y,onClick:(0,h.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(w,{control:u,bubbles:!z.current,name:f,value:p,checked:B,required:l,disabled:m,form:s,style:{transform:"translateX(-100%)"}})]})});t.displayName=o;var u="SwitchThumb",v=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=s(u,d);return(0,b.jsx)(n.Primitive.span,{"data-state":x(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});v.displayName=u;var w=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let j=c.useRef(null),k=(0,i.useComposedRefs)(j,h),n=(0,l.usePrevious)(e),o=(0,m.useSize)(d);return c.useEffect(()=>{let a=j.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[n,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:k,style:{...g.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function x(a){return a?"checked":"unchecked"}w.displayName="SwitchBubbleInput";var y=a.i(97895);function z({className:a,...c}){return(0,b.jsx)(t,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(v,{"data-slot":"switch-thumb",className:(0,y.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var A=a.i(46893),B=a.i(54161),C=a.i(46470),D=a.i(87682),E=a.i(91568),F=a.i(34845);let G=(0,F.default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var H=a.i(64818),I=a.i(9515),J=a.i(92373),K=a.i(53966),L=a.i(38319);let M=(0,F.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var N=a.i(51007),O=a.i(89141),P=a.i(59880),Q=a.i(80409);let R=(0,F.default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var S=a.i(80889),T=a.i(80833),U=a.i(56916);function V(){let[a,h]=(0,c.useState)({serverName:"Retrovax FiveM",serverDescription:"Největší cz/sk FiveM server",maxPlayers:350,whitelistEnabled:!0,maintenanceMode:!1,discordInvite:"https://discord.gg/retrovax",websiteUrl:"https://retrovax.eu",maintenanceMessage:"Server je momentálně v údržbě. Zkuste to prosím později.",autoBackup:!0,backupInterval:"daily",logLevel:"info"}),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)({totalBackups:0,totalSize:"0 MB",lastBackup:null}),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!0);(0,c.useEffect)(()=>{s()},[]);let s=async()=>new Promise(async(a,b)=>{try{let c=await fetch("/api/admin/backup");if(c.ok){let b=await c.json();l(b.backupHistory||[]),n(b.statistics||{totalBackups:0,totalSize:"0 MB",lastBackup:null}),U.toast.success("Historie záloh obnovena"),a()}else U.toast.error("Chyba při načítání záloh"),b(Error("Failed to fetch backup info"))}catch(a){console.error("Error fetching backup info:",a),U.toast.error("Chyba při načítání záloh"),b(a)}}),t=async()=>{j(!0),await new Promise(a=>setTimeout(a,1500)),j(!1),U.toast.success("Nastavení bylo uloženo!")},u=async(a="full")=>{p(!0);try{let b=await fetch("/api/admin/backup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:a})}),c=await b.json();b.ok?(U.toast.success(`✅ ${c.message}`,{description:`Soubor: ${c.filename} (${c.size})`}),await s()):U.toast.error(`❌ Chyba při vytv\xe1řen\xed z\xe1lohy`,{description:c.details||c.error})}catch(a){console.error("Backup error:",a),U.toast.error("❌ Chyba při vytváření zálohy",{description:a.message})}finally{p(!1)}},v=[{title:"Základní nastavení",icon:G,settings:[{key:"serverName",label:"Název serveru",type:"text",description:"Oficiální název FiveM serveru"},{key:"serverDescription",label:"Popis serveru",type:"textarea",description:"Krátký popis serveru pro nové hráče"},{key:"maxPlayers",label:"Maximální počet hráčů",type:"number",description:"Maximální kapacita serveru"}]},{title:"Bezpečnost a přístup",icon:I.Shield,settings:[{key:"whitelistEnabled",label:"Whitelist povolen",type:"switch",description:"Vyžadovat whitelist pro připojení na server"},{key:"maintenanceMode",label:"Režim údržby",type:"switch",description:"Dočasně uzavřít server pro běžné hráče"},{key:"maintenanceMessage",label:"Zpráva při údržbě",type:"textarea",description:"Zpráva zobrazená hráčům během údržby"}]},{title:"Komunita a odkazy",icon:J.Globe,settings:[{key:"discordInvite",label:"Discord pozvánka",type:"text",description:"Odkaz na Discord server"},{key:"websiteUrl",label:"URL webu",type:"text",description:"Oficiální web serveru"}]}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(T.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-[#b90505]/20 to-[#bd2727]/10 text-[#bd2727] border border-[#b90505]/30 shadow-lg",children:(0,b.jsx)(E.Settings,{className:"h-8 w-8"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Nastavení systému"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Spravujte konfiguraci serveru a webu"})]})]}),(0,b.jsxs)(e.Button,{onClick:t,disabled:i,className:"bg-[#8a0101] hover:bg-[#570000] text-white shadow-lg",children:[i?(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,b.jsx)(K.Save,{className:"h-4 w-4 mr-2"}),i?"Ukládání...":"Uložit vše"]})]}),a.maintenanceMode&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 lg:p-4 rounded-lg bg-orange-500/10 border border-orange-500/30",children:[(0,b.jsx)(L.AlertTriangle,{className:"h-5 w-5 text-orange-400"}),(0,b.jsx)("span",{className:"text-orange-400 font-medium",children:"Server je v režimu údržby"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8",children:[(0,b.jsx)("div",{className:"xl:col-span-2 space-y-6 lg:space-y-8",children:v.map((c,e)=>(0,b.jsx)(T.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*e},children:(0,b.jsxs)(d.Card,{className:"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-3 text-white",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[#b90505]/20 to-[#bd2727]/10 text-[#bd2727]",children:(0,b.jsx)(c.icon,{className:"h-5 w-5"})}),c.title]})}),(0,b.jsx)(d.CardContent,{className:"space-y-6",children:c.settings.map(c=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:c.key,className:"text-white font-medium",children:c.label}),(c=>{let d=a[c.key];switch(c.type){case"switch":return(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(z,{checked:d,onCheckedChange:a=>h(b=>({...b,[c.key]:a}))}),(0,b.jsx)("span",{className:"text-sm text-gray-400",children:d?"Zapnuto":"Vypnuto"})]});case"textarea":return(0,b.jsx)(A.Textarea,{value:d,onChange:a=>h(b=>({...b,[c.key]:a.target.value})),className:"mt-1 bg-white/5 border-white/10 text-white",rows:3});case"number":return(0,b.jsx)(f.Input,{type:"number",value:d,onChange:a=>h(b=>({...b,[c.key]:parseInt(a.target.value)})),className:"mt-1 bg-white/5 border-white/10 text-white"});default:return(0,b.jsx)(f.Input,{type:"text",value:d,onChange:a=>h(b=>({...b,[c.key]:a.target.value})),className:"mt-1 bg-white/5 border-white/10 text-white"})}})(c),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:c.description})]},c.key))})]})},c.title))}),(0,b.jsxs)("div",{className:"space-y-6 lg:space-y-8",children:[(0,b.jsx)(T.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:(0,b.jsxs)(d.Card,{className:"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-3 text-white",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[#b90505]/20 to-[#bd2727]/10 text-[#bd2727]",children:(0,b.jsx)(H.Database,{className:"h-5 w-5"})}),"Zálohy databáze"]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(R,{className:"h-4 w-4 text-blue-400"}),(0,b.jsx)("span",{className:"text-sm text-blue-300",children:"Celkem záloh"})]}),(0,b.jsx)("span",{className:"text-blue-400 font-semibold",children:m.totalBackups})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(S.Activity,{className:"h-4 w-4 text-green-400"}),(0,b.jsx)("span",{className:"text-sm text-green-300",children:"Velikost"})]}),(0,b.jsx)("span",{className:"text-green-400 font-semibold",children:m.totalSize})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-white font-medium",children:"Typ zálohy"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>u("full"),disabled:o,className:"w-full justify-start bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 border border-blue-500/30",children:[(0,b.jsx)(M,{className:"h-4 w-4 mr-2"}),"Kompletní záloha"]}),(0,b.jsxs)("button",{onClick:()=>u("structure"),disabled:o,className:"w-full justify-start border border-purple-500/30 text-purple-400 hover:bg-purple-500/10 px-3 py-2 rounded-md bg-transparent flex items-center gap-2",children:[(0,b.jsx)(H.Database,{className:"h-4 w-4"}),"Pouze struktura"]}),(0,b.jsxs)("button",{onClick:()=>u("data"),disabled:o,className:"w-full justify-start border border-green-500/30 text-green-400 hover:bg-green-500/10 px-3 py-2 rounded-md bg-transparent flex items-center gap-2",children:[(0,b.jsx)(R,{className:"h-4 w-4"}),"Pouze data"]})]})]}),o&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[(0,b.jsx)(Q.RefreshCw,{className:"h-4 w-4 text-blue-400 animate-spin"}),(0,b.jsx)("span",{className:"text-blue-300 text-sm",children:"Vytváří se záloha..."})]})]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-white font-medium",children:"Automatické zálohy"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(z,{checked:a.autoBackup,onCheckedChange:a=>h(b=>({...b,autoBackup:a}))}),(0,b.jsx)("span",{className:"text-sm text-gray-400",children:a.autoBackup?"Zapnuto":"Vypnuto"})]})]}),a.autoBackup&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-white font-medium",children:"Interval"}),(0,b.jsxs)(D.Select,{value:a.backupInterval,onValueChange:a=>h(b=>({...b,backupInterval:a})),children:[(0,b.jsx)(D.SelectTrigger,{className:"bg-white/5 border-white/10 text-white",children:(0,b.jsx)(D.SelectValue,{})}),(0,b.jsxs)(D.SelectContent,{children:[(0,b.jsx)(D.SelectItem,{value:"hourly",children:"Každou hodinu"}),(0,b.jsx)(D.SelectItem,{value:"daily",children:"Denně"}),(0,b.jsx)(D.SelectItem,{value:"weekly",children:"Týdně"}),(0,b.jsx)(D.SelectItem,{value:"monthly",children:"Měsíčně"})]})]})]})]})]})]})}),(0,b.jsx)(T.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.3},children:(0,b.jsxs)(d.Card,{className:"bg-gradient-to-br from-white/5 to-white/[0.02] border-white/10",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-3 text-white",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[#b90505]/20 to-[#bd2727]/10 text-[#bd2727]",children:(0,b.jsx)(N.Clock,{className:"h-5 w-5"})}),"Historie záloh"]}),(0,b.jsx)(e.Button,{onClick:s,className:"border-white/20 text-white hover:bg-white/10 bg-transparent h-8 w-8 p-0",children:(0,b.jsx)(Q.RefreshCw,{className:"h-4 w-4"})})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(C.ScrollArea,{className:"h-64",children:q?(0,b.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,b.jsx)(Q.RefreshCw,{className:"h-6 w-6 animate-spin text-gray-400"})}):k.length>0?(0,b.jsx)("div",{className:"space-y-3",children:k.map(a=>(0,b.jsx)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(a=>{switch(a){case"completed":return(0,b.jsx)(O.CheckCircle,{className:"h-4 w-4 text-green-400"});case"failed":return(0,b.jsx)(P.XCircle,{className:"h-4 w-4 text-red-400"});case"running":return(0,b.jsx)(Q.RefreshCw,{className:"h-4 w-4 text-blue-400 animate-spin"});default:return(0,b.jsx)(N.Clock,{className:"h-4 w-4 text-gray-400"})}})(a.status),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(B.Badge,{className:`text-xs ${(a=>{switch(a){case"full":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"structure":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"data":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}})(a.type)}`,children:a.type}),(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[a.file_size," MB"]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(a.created_at).toLocaleString("cs-CZ")})]})]})},a.id))}):(0,b.jsx)("div",{className:"flex items-center justify-center h-32 text-gray-400",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(H.Database,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Žádné zálohy"})]})})})})]})})]})]}),(0,b.jsx)(T.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"mt-8 lg:mt-12 p-3 lg:p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/30",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(L.AlertTriangle,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-yellow-400 font-medium mb-1",children:"Upozornění"}),(0,b.jsxs)("p",{className:"text-yellow-300 text-sm",children:["Změny v nastavení mohou ovlivnit funkčnost serveru. Některé změny vyžadují restart serveru pro plnou aktivaci. Zálohy jsou uloženy v ",(0,b.jsx)("code",{className:"bg-yellow-500/20 px-1 rounded",children:"backups/"})," složce."]})]})]})})]})}a.s(["default",()=>V],81502)}];

//# sourceMappingURL=app_admin_settings_page_tsx_b6d248a9._.js.map