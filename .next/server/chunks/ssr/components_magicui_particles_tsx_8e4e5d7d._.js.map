{"version":3,"sources":["../../../../components/magicui/particles.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport React, {\n  ComponentPropsWithoutRef,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\ninterface MousePosition {\n  x: number;\n  y: number;\n}\n\nfunction MousePosition(): MousePosition {\n  const [mousePosition, setMousePosition] = useState<MousePosition>({\n    x: 0,\n    y: 0,\n  });\n\n  useEffect(() => {\n    const handleMouseMove = (event: MouseEvent) => {\n      setMousePosition({ x: event.clientX, y: event.clientY });\n    };\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  return mousePosition;\n}\n\ninterface ParticlesProps extends ComponentPropsWithoutRef<\"div\"> {\n  className?: string;\n  quantity?: number;\n  staticity?: number;\n  ease?: number;\n  size?: number;\n  refresh?: boolean;\n  color?: string;\n  vx?: number;\n  vy?: number;\n}\n\nfunction hexToRgb(hex: string): number[] {\n  hex = hex.replace(\"#\", \"\");\n\n  if (hex.length === 3) {\n    hex = hex\n      .split(\"\")\n      .map((char) => char + char)\n      .join(\"\");\n  }\n\n  const hexInt = parseInt(hex, 16);\n  const red = (hexInt >> 16) & 255;\n  const green = (hexInt >> 8) & 255;\n  const blue = hexInt & 255;\n  return [red, green, blue];\n}\n\ntype Circle = {\n  x: number;\n  y: number;\n  translateX: number;\n  translateY: number;\n  size: number;\n  alpha: number;\n  targetAlpha: number;\n  dx: number;\n  dy: number;\n  magnetism: number;\n};\n\nexport const Particles: React.FC<ParticlesProps> = ({\n  className = \"\",\n  quantity = 100,\n  staticity = 50,\n  ease = 50,\n  size = 0.4,\n  refresh = false,\n  color = \"#ffffff\",\n  vx = 0,\n  vy = 0,\n  ...props\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const canvasContainerRef = useRef<HTMLDivElement>(null);\n  const context = useRef<CanvasRenderingContext2D | null>(null);\n  const circles = useRef<Circle[]>([]);\n  const mousePosition = MousePosition();\n  const mouse = useRef<{ x: number; y: number }>({ x: 0, y: 0 });\n  const canvasSize = useRef<{ w: number; h: number }>({ w: 0, h: 0 });\n  const dpr = typeof window !== \"undefined\" ? window.devicePixelRatio : 1;\n  const rafID = useRef<number | null>(null);\n  const resizeTimeout = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      context.current = canvasRef.current.getContext(\"2d\");\n    }\n    initCanvas();\n    animate();\n\n    const handleResize = () => {\n      if (resizeTimeout.current) {\n        clearTimeout(resizeTimeout.current);\n      }\n      resizeTimeout.current = setTimeout(() => {\n        initCanvas();\n      }, 200);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      if (rafID.current != null) {\n        window.cancelAnimationFrame(rafID.current);\n      }\n      if (resizeTimeout.current) {\n        clearTimeout(resizeTimeout.current);\n      }\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [color]);\n\n  useEffect(() => {\n    onMouseMove();\n  }, [mousePosition.x, mousePosition.y]);\n\n  useEffect(() => {\n    initCanvas();\n  }, [refresh]);\n\n  const initCanvas = () => {\n    resizeCanvas();\n    drawParticles();\n  };\n\n  const onMouseMove = () => {\n    if (canvasRef.current) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const { w, h } = canvasSize.current;\n      const x = mousePosition.x - rect.left - w / 2;\n      const y = mousePosition.y - rect.top - h / 2;\n      const inside = x < w / 2 && x > -w / 2 && y < h / 2 && y > -h / 2;\n      if (inside) {\n        mouse.current.x = x;\n        mouse.current.y = y;\n      }\n    }\n  };\n\n  const resizeCanvas = () => {\n    if (canvasContainerRef.current && canvasRef.current && context.current) {\n      canvasSize.current.w = canvasContainerRef.current.offsetWidth;\n      canvasSize.current.h = canvasContainerRef.current.offsetHeight;\n\n      canvasRef.current.width = canvasSize.current.w * dpr;\n      canvasRef.current.height = canvasSize.current.h * dpr;\n      canvasRef.current.style.width = `${canvasSize.current.w}px`;\n      canvasRef.current.style.height = `${canvasSize.current.h}px`;\n      context.current.scale(dpr, dpr);\n\n      // Clear existing particles and create new ones with exact quantity\n      circles.current = [];\n      for (let i = 0; i < quantity; i++) {\n        const circle = circleParams();\n        drawCircle(circle);\n      }\n    }\n  };\n\n  const circleParams = (): Circle => {\n    const x = Math.floor(Math.random() * canvasSize.current.w);\n    const y = Math.floor(Math.random() * canvasSize.current.h);\n    const translateX = 0;\n    const translateY = 0;\n    const pSize = Math.floor(Math.random() * 2) + size;\n    const alpha = 0;\n    const targetAlpha = parseFloat((Math.random() * 0.6 + 0.1).toFixed(1));\n    const dx = (Math.random() - 0.5) * 0.1;\n    const dy = (Math.random() - 0.5) * 0.1;\n    const magnetism = 0.1 + Math.random() * 4;\n    return {\n      x,\n      y,\n      translateX,\n      translateY,\n      size: pSize,\n      alpha,\n      targetAlpha,\n      dx,\n      dy,\n      magnetism,\n    };\n  };\n\n  const rgb = hexToRgb(color);\n\n  const drawCircle = (circle: Circle, update = false) => {\n    if (context.current) {\n      const { x, y, translateX, translateY, size, alpha } = circle;\n      context.current.translate(translateX, translateY);\n      context.current.beginPath();\n      context.current.arc(x, y, size, 0, 2 * Math.PI);\n      context.current.fillStyle = `rgba(${rgb.join(\", \")}, ${alpha})`;\n      context.current.fill();\n      context.current.setTransform(dpr, 0, 0, dpr, 0, 0);\n\n      if (!update) {\n        circles.current.push(circle);\n      }\n    }\n  };\n\n  const clearContext = () => {\n    if (context.current) {\n      context.current.clearRect(\n        0,\n        0,\n        canvasSize.current.w,\n        canvasSize.current.h,\n      );\n    }\n  };\n\n  const drawParticles = () => {\n    clearContext();\n    const particleCount = quantity;\n    for (let i = 0; i < particleCount; i++) {\n      const circle = circleParams();\n      drawCircle(circle);\n    }\n  };\n\n  const remapValue = (\n    value: number,\n    start1: number,\n    end1: number,\n    start2: number,\n    end2: number,\n  ): number => {\n    const remapped =\n      ((value - start1) * (end2 - start2)) / (end1 - start1) + start2;\n    return remapped > 0 ? remapped : 0;\n  };\n\n  const animate = () => {\n    clearContext();\n    circles.current.forEach((circle: Circle, i: number) => {\n      // Handle the alpha value\n      const edge = [\n        circle.x + circle.translateX - circle.size, // distance from left edge\n        canvasSize.current.w - circle.x - circle.translateX - circle.size, // distance from right edge\n        circle.y + circle.translateY - circle.size, // distance from top edge\n        canvasSize.current.h - circle.y - circle.translateY - circle.size, // distance from bottom edge\n      ];\n      const closestEdge = edge.reduce((a, b) => Math.min(a, b));\n      const remapClosestEdge = parseFloat(\n        remapValue(closestEdge, 0, 20, 0, 1).toFixed(2),\n      );\n      if (remapClosestEdge > 1) {\n        circle.alpha += 0.02;\n        if (circle.alpha > circle.targetAlpha) {\n          circle.alpha = circle.targetAlpha;\n        }\n      } else {\n        circle.alpha = circle.targetAlpha * remapClosestEdge;\n      }\n      circle.x += circle.dx + vx;\n      circle.y += circle.dy + vy;\n      circle.translateX +=\n        (mouse.current.x / (staticity / circle.magnetism) - circle.translateX) /\n        ease;\n      circle.translateY +=\n        (mouse.current.y / (staticity / circle.magnetism) - circle.translateY) /\n        ease;\n\n      drawCircle(circle, true);\n\n      // circle gets out of the canvas\n      if (\n        circle.x < -circle.size ||\n        circle.x > canvasSize.current.w + circle.size ||\n        circle.y < -circle.size ||\n        circle.y > canvasSize.current.h + circle.size\n      ) {\n        // remove the circle from the array\n        circles.current.splice(i, 1);\n        // create a new circle\n        const newCircle = circleParams();\n        drawCircle(newCircle);\n      }\n    });\n    rafID.current = window.requestAnimationFrame(animate);\n  };\n\n  return (\n    <div\n      className={cn(\"pointer-events-none\", className)}\n      ref={canvasContainerRef}\n      aria-hidden=\"true\"\n      {...props}\n    >\n      <canvas ref={canvasRef} className=\"size-full\" />\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}