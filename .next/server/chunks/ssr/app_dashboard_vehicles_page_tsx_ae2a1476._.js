module.exports=[94288,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(5522),e=a.i(40695),f=a.i(28224),g=a.i(46143),h=a.i(3130),i=a.i(54161),j=a.i(50463),k=a.i(23292),l=a.i(46271),m=a.i(88237),n=a.i(54816),o=a.i(76504),p=a.i(5094),q=a.i(5784),r=a.i(17755),s=a.i(48464),t=a.i(5151),u=a.i(37776),v=a.i(46842),w=a.i(70106);let x=(0,w.default)("fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]);var y=a.i(90669);let z=(0,w.default)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var A=a.i(78788),B=a.i(52308);function C(){let[a,w]=(0,c.useState)([]),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)({}),[K,L]=(0,c.useState)({}),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!0),Q=async()=>new Promise(async(a,b)=>{try{let c=await fetch("/api/vehicles"),d=await c.json();c.ok?(w(d),k.toast.success(`NaÄteno ${d.length} vozidel`),a()):(k.toast.error("Chyba pÅ™i naÄÃ­tÃ¡nÃ­ vozidel"),b(Error(d.error)))}catch(a){k.toast.error("Nastala chyba pÅ™i naÄÃ­tÃ¡nÃ­ vozidel"),console.error("Chyba pÅ™i naÄÃ­tÃ¡nÃ­ vozidel:",a),b(a)}});(0,c.useEffect)(()=>{(async()=>{try{P(!0),k.toast.loading("NaÄÃ­tÃ¡m vozidla..."),await Q(),k.toast.dismiss()}catch(a){k.toast.dismiss()}finally{P(!1)}})()},[]);let R=async a=>{try{if((await fetch(`/api/vehicles/${a.plate}`,{method:"DELETE"})).ok){k.toast.success("Vozidlo bylo ÃºspÄ›Å¡nÄ› smazÃ¡no."),w(b=>b.filter(b=>b.plate!==a.plate));let b=await fetch("/api/user/me"),c=await b.json();await fetch("https://discordapp.com/api/webhooks/1359947852310122557/pVUIlnZXteWqGXl1ILJbhYnVrqdbwsJ1DxmgeRPUXfHm7wW5DRvn2ash-7BzV0QygStq",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[{title:"ðŸš¨ Vozidlo smazÃ¡no",color:0xff0000,fields:[{name:"ðŸ‘¤ UÅ¾ivatel",value:`${c.username} (${c.discordId})`,inline:!1},{name:"ðŸš— SPZ",value:a.plate,inline:!0},{name:"ðŸ·ï¸ PÅ™ezdÃ­vka",value:a.nickname||"Å½Ã¡dnÃ¡",inline:!0},{name:"ðŸ•“ ÄŒas",value:new Date().toLocaleString("cs-CZ"),inline:!1}]}]})})}else k.toast.error("NepodaÅ™ilo se smazat vozidlo.")}catch(a){k.toast.error("DoÅ¡lo k chybÄ› pÅ™i mazÃ¡nÃ­."),console.error(a)}finally{N(null)}},S=async(a,b)=>{try{await navigator.clipboard.writeText(a),k.toast.success(`${b} zkop\xedrov\xe1no!`,{description:a,duration:2e3})}catch{k.toast.error("NepodaÅ™ilo se zkopÃ­rovat")}},T=[{id:"select",header:({table:a})=>(0,b.jsx)(g.Checkbox,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:b=>a.toggleAllPageRowsSelected(!!b)}),cell:({row:a})=>(0,b.jsx)(g.Checkbox,{checked:a.getIsSelected(),onCheckedChange:b=>a.toggleSelected(!!b)})},{accessorKey:"plate",header:"SPZ",cell:({row:a})=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Car,{className:"h-4 w-4 text-[#bd2727]"}),(0,b.jsx)("span",{className:"font-mono font-semibold text-[#bd2727]",children:a.getValue("plate")})]})},{accessorKey:"owner",header:"VlastnÃ­k",cell:({row:a})=>{let c=a.getValue("owner"),d=c.length>16?`${c.slice(0,6)}...${c.slice(-3)}`:c;return(0,b.jsx)(n.TooltipProvider,{children:(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(v.User,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"font-mono text-xs cursor-help text-gray-300",children:d})]})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsx)("span",{className:"font-mono text-xs",children:c})})]})})}},{accessorKey:"garage_id",header:"GarÃ¡Å¾",cell:({row:a})=>{let c=String(a.getValue("garage_id")||""),d=c.length>16?`${c.slice(0,12)}...`:c;return(0,b.jsx)(i.Badge,{variant:"outline",className:"border-blue-500/30 text-blue-400 bg-blue-500/10",children:d||"Å½Ã¡dnÃ¡"})}},{accessorKey:"type",header:"Typ",cell:({row:a})=>(0,b.jsx)(i.Badge,{variant:"outline",className:"border-purple-500/30 text-purple-400 bg-purple-500/10",children:a.getValue("type")})},{accessorKey:"job",header:"Job",cell:({row:a})=>{let c=a.getValue("job");return c?(0,b.jsx)(i.Badge,{variant:"outline",className:"border-orange-500/30 text-orange-400 bg-orange-500/10",children:c}):(0,b.jsx)("span",{className:"text-gray-500",children:"-"})}},{accessorKey:"stored",header:"UloÅ¾eno",cell:({row:a})=>{let c=1===a.getValue("stored");return(0,b.jsx)(i.Badge,{variant:"outline",className:c?"border-green-500/30 text-green-400 bg-green-500/10":"border-red-500/30 text-red-400 bg-red-500/10",children:c?"Ano":"Ne"})}},{accessorKey:"nickname",header:"PÅ™ezdÃ­vka",cell:({row:a})=>{let c=a.getValue("nickname")||"",d=c.length>12?`${c.slice(0,12)}...`:c;return d?(0,b.jsx)("span",{className:"text-gray-300",children:d}):(0,b.jsx)("span",{className:"text-gray-500",children:"-"})}},{accessorKey:"fuel",header:"Palivo",cell:({row:a})=>{let c=a.getValue("fuel"),d=c>50?"text-green-400":c>25?"text-yellow-400":"text-red-400";return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:`h-4 w-4 ${d}`}),(0,b.jsxs)("span",{className:d,children:[c,"%"]})]})}},{accessorKey:"mileage",header:"NÃ¡jezd",cell:({row:a})=>{let c=a.getValue("mileage");return(0,b.jsx)(n.TooltipProvider,{children:(0,b.jsxs)(n.Tooltip,{children:[(0,b.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z,{className:"h-4 w-4 text-gray-400"}),(0,b.jsxs)("span",{className:"text-xs cursor-help text-gray-300",children:[c.toFixed(1)," km"]})]})}),(0,b.jsx)(n.TooltipContent,{children:(0,b.jsxs)("span",{className:"text-xs",children:[c.toLocaleString("cs-CZ")," km"]})})]})})}},{id:"actions",header:()=>(0,b.jsx)("div",{className:"text-right pr-4",children:"Akce"}),cell:({row:a})=>{let c=a.original;return(0,b.jsxs)("div",{className:"flex justify-end pr-2",children:[(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-white/10",children:(0,b.jsx)(r.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(o.DropdownMenuContent,{align:"end",className:"bg-[#131618] border-white/10",children:[(0,b.jsx)(o.DropdownMenuLabel,{className:"text-white",children:"Akce"}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>S(c.plate,"SPZ"),className:"text-gray-300 hover:text-white hover:bg-white/10",children:[(0,b.jsx)(t.Copy,{className:"h-4 w-4 mr-2"}),"ZkopÃ­rovat SPZ"]}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>S(c.owner,"VlastnÃ­k"),className:"text-gray-300 hover:text-white hover:bg-white/10",children:[(0,b.jsx)(t.Copy,{className:"h-4 w-4 mr-2"}),"ZkopÃ­rovat vlastnÃ­ka"]}),(0,b.jsx)(o.DropdownMenuSeparator,{className:"bg-white/10"}),(0,b.jsxs)(o.DropdownMenuItem,{onClick:()=>N(c),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",children:[(0,b.jsx)(u.Trash2,{className:"h-4 w-4 mr-2"}),"Smazat"]})]})]}),(0,b.jsx)(p.AlertDialog,{open:M?.plate===c.plate,onOpenChange:a=>!a&&N(null),children:(0,b.jsxs)(p.AlertDialogContent,{className:"bg-[#131618] border-white/10",children:[(0,b.jsxs)(p.AlertDialogHeader,{children:[(0,b.jsx)(p.AlertDialogTitle,{className:"text-white",children:"Opravdu chceÅ¡ smazat vozidlo?"}),(0,b.jsxs)(p.AlertDialogDescription,{className:"text-gray-400",children:["SPZ: ",(0,b.jsx)("span",{className:"font-mono font-semibold text-[#bd2727]",children:c.plate}),(0,b.jsx)("br",{}),"Tato akce je nevratnÃ¡."]})]}),(0,b.jsxs)(p.AlertDialogFooter,{children:[(0,b.jsx)(p.AlertDialogCancel,{className:"bg-gray-600 hover:bg-gray-700 text-white",children:"ZruÅ¡it"}),(0,b.jsx)(p.AlertDialogAction,{onClick:()=>R(c),className:"bg-red-600 hover:bg-red-700 text-white",children:"Smazat"})]})]})})]})}}],U=(0,A.useReactTable)({data:a,columns:T,state:{sorting:E,columnFilters:G,columnVisibility:I,rowSelection:K},onSortingChange:F,onColumnFiltersChange:H,onColumnVisibilityChange:J,onRowSelectionChange:L,getCoreRowModel:(0,B.getCoreRowModel)(),getFilteredRowModel:(0,B.getFilteredRowModel)(),getPaginationRowModel:(0,B.getPaginationRowModel)(),getSortedRowModel:(0,B.getSortedRowModel)()});return O?(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a]",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2",children:(0,b.jsx)("div",{className:"h-[400px] w-[600px] rounded-full bg-[#b90505]/8 blur-3xl"})}),(0,b.jsxs)("div",{className:"relative z-10 space-y-6 px-4 md:px-0",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(j.Skeleton,{className:"h-8 w-48 bg-white/5"}),(0,b.jsx)(j.Skeleton,{className:"h-4 w-96 bg-white/5"})]}),(0,b.jsx)("div",{className:"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)(h.Card,{className:"bg-white/5 border border-white/10 rounded-2xl",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(j.Skeleton,{className:"h-6 w-1/2 bg-white/10"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)(j.Skeleton,{className:"h-8 w-full bg-white/10"})})]},c))})]})]}):(0,b.jsxs)("div",{className:"relative min-h-screen bg-[#0a0a0a]",children:[(0,b.jsxs)("div",{className:"pointer-events-none absolute inset-0 z-0 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute left-1/2 top-1/4 -translate-x-1/2 h-[400px] w-[800px] rounded-full bg-[#b90505]/8 blur-3xl"}),(0,b.jsx)("div",{className:"absolute right-1/3 bottom-1/3 h-[300px] w-[500px] rounded-full bg-[#b90505]/5 blur-3xl"})]}),(0,b.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-0",children:[(0,b.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Badge,{variant:"outline",className:"border-[#b90505]/60 text-[#bd2727] bg-[#b90505]/10 px-4 py-1 font-semibold tracking-wide backdrop-blur flex gap-2 w-fit mb-4",children:[(0,b.jsx)(s.Car,{className:"h-4 w-4 text-[#bd2727] drop-shadow-[0_0_5px_#bd2727]"}),"SprÃ¡va vozidel"]}),(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-extrabold text-white drop-shadow",children:"DatabÃ¡ze vozidel"}),(0,b.jsx)("p",{className:"text-lg text-gray-400 max-w-2xl",children:"SprÃ¡va vÅ¡ech vozidel na serveru s moÅ¾nostÃ­ filtrovÃ¡nÃ­ a mazÃ¡nÃ­"})]}),(0,b.jsx)(f.Button,{onClick:Q,className:"border-[#b90505]/30 text-[#bd2727] hover:bg-[#b90505]/10 bg-transparent",children:"Obnovit"})]})}),(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.1,ease:"easeOut"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-[#b90505]/20 text-[#bd2727]",children:(0,b.jsx)(s.Car,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(h.CardTitle,{className:"text-white text-sm",children:"Celkem vozidel"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-[#bd2727]",children:a.length})})]}),(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-500/20 text-green-400",children:(0,b.jsx)(y.Activity,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(h.CardTitle,{className:"text-white text-sm",children:"UloÅ¾enÃ½ch vozidel"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-green-400",children:a.filter(a=>1===a.stored).length})})]}),(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/20 text-blue-400",children:(0,b.jsx)(v.User,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(h.CardTitle,{className:"text-white text-sm",children:"JedineÄnÃ½ch vlastnÃ­kÅ¯"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:new Set(a.map(a=>a.owner)).size})})]}),(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(h.CardHeader,{className:"flex flex-row items-center gap-3 pb-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/20 text-purple-400",children:(0,b.jsx)(x,{className:"h-5 w-5 drop-shadow-[0_0_5px_currentColor]"})}),(0,b.jsx)(h.CardTitle,{className:"text-white text-sm",children:"PrÅ¯mÄ›rnÃ© palivo"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("p",{className:"text-3xl font-bold text-purple-400",children:[a.length>0?Math.round(a.reduce((a,b)=>a+b.fuel,0)/a.length):0,"%"]})})]})]}),(0,b.jsx)(l.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:"easeOut"},children:(0,b.jsxs)(h.Card,{className:"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 shadow-xl rounded-2xl backdrop-blur-md",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsxs)(h.CardTitle,{className:"text-white flex items-center gap-2",children:[(0,b.jsx)(s.Car,{className:"w-5 h-5 text-[#bd2727]"}),"Seznam vozidel"]}),(0,b.jsx)(h.CardDescription,{className:"text-gray-400",children:"KompletnÃ­ pÅ™ehled vÅ¡ech vozidel v databÃ¡zi"})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("div",{className:"flex items-center py-4 gap-4",children:[(0,b.jsx)(d.Input,{placeholder:"Filtrovat podle SPZ...",value:C,onChange:a=>{D(a.target.value),U.getColumn("plate")?.setFilterValue(a.target.value)},className:"max-w-sm bg-white/5 border-white/10 text-white"}),(0,b.jsxs)(o.DropdownMenu,{children:[(0,b.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:"ml-auto border-white/10 text-white hover:bg-white/10",children:["Sloupce ",(0,b.jsx)(q.ChevronDown,{className:"ml-2 h-4 w-4"})]})}),(0,b.jsx)(o.DropdownMenuContent,{align:"end",className:"bg-[#131618] border-white/10",children:U.getAllColumns().filter(a=>a.getCanHide()).map(a=>(0,b.jsx)(o.DropdownMenuCheckboxItem,{checked:a.getIsVisible(),onCheckedChange:b=>a.toggleVisibility(!!b),className:"text-white hover:bg-white/10",children:a.id},a.id))})]})]}),(0,b.jsx)("div",{className:"overflow-auto w-full",children:(0,b.jsx)("div",{className:"min-w-[900px] sm:min-w-full rounded-md border border-white/10",children:(0,b.jsxs)(m.Table,{className:"table-auto w-full text-sm",children:[(0,b.jsx)(m.TableHeader,{children:U.getHeaderGroups().map(a=>(0,b.jsx)(m.TableRow,{className:"border-white/10 hover:bg-white/5",children:a.headers.map(a=>(0,b.jsx)(m.TableHead,{className:"whitespace-nowrap px-2 py-3 text-xs sm:text-sm text-gray-300",children:a.isPlaceholder?null:(0,A.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(m.TableBody,{children:U.getRowModel().rows.length?U.getRowModel().rows.map(a=>(0,b.jsx)(m.TableRow,{className:"border-white/10 hover:bg-white/5",children:a.getVisibleCells().map(a=>(0,b.jsx)(m.TableCell,{className:"whitespace-nowrap px-2 py-2 text-xs sm:text-sm text-white",children:(0,A.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(m.TableRow,{children:(0,b.jsx)(m.TableCell,{colSpan:T.length,className:"text-center text-gray-400 py-8",children:"Å½Ã¡dnÃ¡ data k zobrazenÃ­."})})})]})})}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,b.jsxs)("div",{className:"flex-1 text-sm text-gray-400",children:[U.getFilteredSelectedRowModel().rows.length," z ",U.getFilteredRowModel().rows.length," vybrÃ¡no."]}),(0,b.jsxs)("div",{className:"space-x-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>U.previousPage(),disabled:!U.getCanPreviousPage(),className:"border-white/10 text-white hover:bg-white/10",children:"PÅ™edchozÃ­"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>U.nextPage(),disabled:!U.getCanNextPage(),className:"border-white/10 text-white hover:bg-white/10",children:"DalÅ¡Ã­"})]})]})]})]})})]})]})}a.s(["default",()=>C],94288)}];

//# sourceMappingURL=app_dashboard_vehicles_page_tsx_ae2a1476._.js.map