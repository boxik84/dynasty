{"version":3,"sources":["../../../../app/whitelist/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { CheckCircle, AlertCircle, User, Clock, Ban, FileText } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { toast } from \"sonner\";\n\ninterface WhitelistQuestion {\n  id: number\n  question: string\n  field_name: string\n  field_type: 'text' | 'textarea' | 'number' | 'checkbox' | 'url' | 'select'\n  placeholder?: string\n  required: boolean\n  category: string\n  options?: string[]\n  min_value?: number\n  max_value?: number\n  min_length?: number\n  max_length?: number\n  order_index: number\n}\n\ninterface UserData {\n  discordId: string;\n  username: string;\n  roles: string[];\n  hasWhitelist: boolean;\n}\n\nconst categoryLabels = {\n  basic: 'Základní informace',\n  motivation: 'Motivace',\n  roleplay: 'Roleplay znalosti',\n  rules_basic: 'Pravidla - základní pojmy',\n  rules_advanced: 'Pravidla - pokročilé',\n  specific_rules: 'Specifická pravidla',\n  scenarios: 'Praktické scénáře',\n  agreement: 'Souhlas s pravidly',\n  general: 'Obecné otázky'\n}\n\nexport default function WhitelistPage() {\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [user, setUser] = useState<UserData | null>(null);\n  const [questions, setQuestions] = useState<WhitelistQuestion[]>([]);\n  const [categories, setCategories] = useState<Record<string, WhitelistQuestion[]>>({});\n  const [formData, setFormData] = useState<Record<string, any>>({});\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [hasActiveRequest, setHasActiveRequest] = useState(false);\n  const [attemptInfo, setAttemptInfo] = useState<{\n    totalAttempts: number;\n    remainingAttempts: number;\n    maxAttempts: number;\n  } | null>(null);\n\n  useEffect(() => {\n    const initializeForm = async () => {\n      try {\n        // Fetch user data\n        const userRes = await fetch(\"/api/user/me\", { cache: \"no-store\" });\n        const userData = await userRes.json();\n\n        if (!userData?.discordId) {\n          router.push(\"/sign-in\");\n          return;\n        }\n\n        setUser(userData);\n\n        // Fetch whitelist questions\n        const questionsRes = await fetch(\"/api/whitelist-questions\");\n        const questionsData = await questionsRes.json();\n\n        if (questionsRes.ok) {\n          setQuestions(questionsData.questions || []);\n          setCategories(questionsData.categories || {});\n          \n          // Initialize form data with default values\n          const initialFormData: Record<string, any> = {};\n          questionsData.questions.forEach((question: WhitelistQuestion) => {\n            if (question.field_type === 'checkbox') {\n              initialFormData[question.field_name] = false;\n            } else if (question.field_type === 'number') {\n              initialFormData[question.field_name] = '';\n        } else {\n              initialFormData[question.field_name] = '';\n            }\n          });\n          \n          // Set username for discord field if available\n          if (userData.username) {\n            initialFormData['discordName'] = userData.username;\n          }\n          \n          setFormData(initialFormData);\n        }\n        \n        // Fetch attempts info\n          const attemptsRes = await fetch(\"/api/user/whitelist-requests\");\n          const attemptsData = await attemptsRes.json();\n          \n          if (attemptsRes.ok) {\n            setAttemptInfo({\n              totalAttempts: attemptsData.totalAttempts,\n              remainingAttempts: attemptsData.remainingAttempts,\n              maxAttempts: attemptsData.maxAttempts\n            });\n            setHasActiveRequest(!!attemptsData.activeRequest);\n        }\n      } catch (error) {\n        console.error(\"Chyba při načítání formuláře:\", error);\n        router.push(\"/sign-in\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initializeForm();\n  }, [router]);\n\n  const handleInputChange = (fieldName: string, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      [fieldName]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setSubmitStatus('idle');\n    setErrorMessage('');\n\n    try {\n      const response = await fetch('/api/whitelist', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ formData }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setSubmitStatus('success');\n        setHasActiveRequest(true);\n        \n        if (data.totalAttempts && data.remainingAttempts !== undefined) {\n          setAttemptInfo({\n            totalAttempts: data.totalAttempts,\n            remainingAttempts: data.remainingAttempts,\n            maxAttempts: data.maxAttempts || 3\n          });\n        }\n        \n        toast.success('Žádost byla úspěšně odeslána!', {\n          description: `Zbývá vám ${data.remainingAttempts || 'neznámý počet'} pokusů. Budete informováni o výsledku prostřednictvím Discordu.`,\n        });\n      } else {\n        setSubmitStatus('error');\n        setErrorMessage(data.error || 'Došlo k chybě při odesílání žádosti');\n        \n        if (data.error?.includes('maximálního počtu pokusů')) {\n          toast.error('Dosáhli jste limitu pokusů', {\n            description: 'Vyčerpali jste všechny 3 pokusy na whitelist žádost.',\n          });\n        } else {\n          toast.error('Chyba při odesílání žádosti', {\n            description: data.error || 'Došlo k neočekávané chybě',\n          });\n        }\n      }\n    } catch (error) {\n      setSubmitStatus('error');\n      setErrorMessage('Došlo k chybě při odesílání žádosti');\n      toast.error('Chyba při odesílání žádosti', {\n        description: 'Došlo k neočekávané chybě',\n      });\n      console.error('Error submitting whitelist:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const renderField = (question: WhitelistQuestion) => {\n    const value = formData[question.field_name] || '';\n    \n    switch (question.field_type) {\n      case 'text':\n      case 'url':\n        return (\n          <Input\n            id={question.field_name}\n            name={question.field_name}\n            type={question.field_type === 'url' ? 'url' : 'text'}\n            value={value}\n            onChange={(e) => handleInputChange(question.field_name, e.target.value)}\n            required={question.required}\n            placeholder={question.placeholder}\n            minLength={question.min_length}\n            maxLength={question.max_length}\n            className=\"bg-white/5 border-white/10 text-white\"\n          />\n        );\n      \n      case 'number':\n        return (\n          <Input\n            id={question.field_name}\n            name={question.field_name}\n            type=\"number\"\n            value={value}\n            onChange={(e) => handleInputChange(question.field_name, e.target.value)}\n            required={question.required}\n            placeholder={question.placeholder}\n            min={question.min_value}\n            max={question.max_value}\n            className=\"bg-white/5 border-white/10 text-white\"\n          />\n        );\n      \n      case 'textarea':\n        return (\n          <textarea\n            id={question.field_name}\n            name={question.field_name}\n            value={value}\n            onChange={(e) => handleInputChange(question.field_name, e.target.value)}\n            required={question.required}\n            placeholder={question.placeholder}\n            minLength={question.min_length}\n            maxLength={question.max_length}\n            rows={question.min_length && question.min_length > 50 ? 4 : 3}\n            className=\"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#b90505]/50 focus:border-transparent resize-none\"\n          />\n        );\n      \n      case 'checkbox':\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id={question.field_name}\n              checked={!!value}\n              onCheckedChange={(checked) => handleInputChange(question.field_name, !!checked)}\n              required={question.required}\n            />\n            <Label htmlFor={question.field_name} className=\"text-white text-sm\">\n              {question.question}\n            </Label>\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center\">\n        <div className=\"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2\">\n          <div className=\"h-[400px] w-[600px] rounded-full bg-[#b90505]/10 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 w-full max-w-2xl mx-auto p-4 sm:p-6\">\n          <Skeleton className=\"h-8 w-48 mb-8 bg-white/5\" />\n          <Skeleton className=\"w-full h-96 bg-white/5 rounded-2xl\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) return null;\n\n  const WAITING_ROLE = process.env.DISCORD_WAITING_ROLE_ID!;\n  const BLACKLISTED_ROLE = process.env.DISCORD_BLACKLISTED_ROLE_ID!;\n\n  const isBlacklisted = user.roles.includes(BLACKLISTED_ROLE);\n  const isWaiting = user.roles.includes(WAITING_ROLE);\n  const hasWhitelist = user.hasWhitelist;\n\n  if (isBlacklisted) {\n    return (\n      <div className=\"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center\">\n        <div className=\"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2\">\n          <div className=\"h-[400px] w-[600px] rounded-full bg-red-500/10 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 w-full max-w-md mx-auto p-4\">\n          <Card className=\"bg-gradient-to-br from-red-950/50 via-red-900/50 to-red-950/50 border-red-500/30\">\n            <CardHeader className=\"text-center\">\n              <Ban className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n              <CardTitle className=\"text-red-400\">Přístup zamítnut</CardTitle>\n              <CardDescription className=\"text-red-300\">\n                Váš účet je na blacklistu a nemůžete podat žádost o whitelist.\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  if (hasWhitelist) {\n    return (\n      <div className=\"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center\">\n        <div className=\"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2\">\n          <div className=\"h-[400px] w-[600px] rounded-full bg-green-500/10 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 w-full max-w-md mx-auto p-4\">\n          <Card className=\"bg-gradient-to-br from-green-950/50 via-green-900/50 to-green-950/50 border-green-500/30\">\n            <CardHeader className=\"text-center\">\n              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-4\" />\n              <CardTitle className=\"text-green-400\">Whitelist aktivní</CardTitle>\n              <CardDescription className=\"text-green-300\">\n                Již máte aktivní whitelist a můžete se připojit na server.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"text-center\">\n              <Button\n                onClick={() => router.push('/dashboard')}\n                className=\"bg-green-600 hover:bg-green-700\"\n              >\n                Přejít do dashboardu\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  if (isWaiting || hasActiveRequest) {\n    return (\n      <div className=\"relative min-h-screen bg-[#0a0a0a] flex items-center justify-center\">\n        <div className=\"pointer-events-none absolute left-1/2 top-1/4 z-0 -translate-x-1/2\">\n          <div className=\"h-[400px] w-[600px] rounded-full bg-yellow-500/10 blur-3xl\" />\n        </div>\n        <div className=\"relative z-10 w-full max-w-md mx-auto p-4\">\n          <Card className=\"bg-gradient-to-br from-yellow-950/50 via-yellow-900/50 to-yellow-950/50 border-yellow-500/30\">\n            <CardHeader className=\"text-center\">\n              <Clock className=\"h-12 w-12 text-yellow-500 mx-auto mb-4\" />\n              <CardTitle className=\"text-yellow-400\">Čeká na schválení</CardTitle>\n              <CardDescription className=\"text-yellow-300\">\n                Vaše žádost o whitelist čeká na schválení administrátory.\n              </CardDescription>\n            </CardHeader>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative min-h-screen bg-[#0a0a0a]\">\n      \n      <div className=\"pointer-events-none absolute left-1/3 top-1/4 z-0\">\n        <div className=\"h-[600px] w-[800px] rounded-full bg-[#b90505]/8 blur-3xl\" />\n      </div>\n      <div className=\"pointer-events-none absolute right-1/4 bottom-1/3 z-0\">\n        <div className=\"h-[400px] w-[600px] rounded-full bg-[#b90505]/5 blur-3xl\" />\n      </div>\n\n              <div className=\"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 max-w-2xl\">\n        \n          {attemptInfo && (\n            <motion.div\n              initial={{ opacity: 0, y: 24 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.7 }}\n              className=\"mb-6\"\n            >\n              <Card className=\"bg-gradient-to-br from-blue-950/30 via-blue-900/30 to-blue-950/30 border-blue-500/20\">\n                <CardHeader>\n                  <CardTitle className=\"text-blue-400 flex items-center gap-2\">\n                    <FileText className=\"h-5 w-5\" />\n                    Informace o pokusech\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-blue-300\">\n                        {attemptInfo.totalAttempts} / {attemptInfo.maxAttempts}\n                      </div>\n                      <p className=\"text-blue-200 text-sm\">Využité pokusy</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-green-300\">\n                        {attemptInfo.remainingAttempts}\n                      </div>\n                      <p className=\"text-green-200 text-sm\">Zbývající pokusy</p>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-2xl font-bold text-yellow-300\">\n                        {hasActiveRequest ? 'Ano' : 'Ne'}\n                      </div>\n                      <p className=\"text-yellow-200 text-sm\">Aktivní žádost</p>\n                    </div>\n                  </div>\n                  {attemptInfo.remainingAttempts === 0 && (\n                    <div className=\"mt-4 p-3 bg-red-950/50 border border-red-500/30 rounded-lg\">\n                      <p className=\"text-red-300 text-sm\">\n                        ⚠️ Vyčerpali jste všechny pokusy na whitelist žádost. Nemůžete podat další žádost.\n                      </p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </motion.div>\n          )}\n\n          <motion.div\n            initial={{ opacity: 0, y: 24 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.7, delay: 0.2 }}\n          >\n            <Card className=\"bg-gradient-to-br from-[#131618]/80 via-[#151a1c]/80 to-[#111b22]/90 border border-white/10 backdrop-blur-md\">\n              <CardHeader>\n                <CardTitle className=\"text-white\">Whitelist formulář</CardTitle>\n                <CardDescription>\n                Všechna pole jsou povinná. Odpovězte podle pravidel serveru dostupných na{' '}\n                <Link href=\"https://retrovax-pravidla.gitbook.io/retrovax-fivem-pravidla\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#b90505] hover:text-[#d40606] underline\">\n                  retrovax-pravidla.gitbook.io\n                </Link>\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"p-4 sm:p-6\">\n                <motion.div\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.6, ease: \"easeOut\" }}\n                  className=\"space-y-8\"\n                >\n                \n                <div className=\"text-center mb-8\">\n                  <Badge\n                    variant=\"outline\"\n                    className=\"border-[#b90505]/60 text-[#bd2727] bg-[#b90505]/10 px-4 py-1 font-semibold tracking-wide backdrop-blur flex gap-2 mx-auto w-fit mb-4\"\n                  >\n                    <User className=\"h-4 w-4 text-[#bd2727] drop-shadow-[0_0_5px_#bd2727]\" />\n                    {user.username}\n                  </Badge>\n                  <h1 className=\"text-2xl sm:text-3xl font-bold text-white mb-4\">Žádost o Whitelist</h1>\n                  <p className=\"text-sm sm:text-base text-gray-400 max-w-md mx-auto\">\n                    Vyplňte formulář níže pro získání přístupu na náš roleplay server\n                  </p>\n                </div>\n\n                \n                {submitStatus === 'success' && (\n                  <motion.div\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    className=\"bg-green-950/50 border border-green-500/30 rounded-lg p-4 text-center\"\n                  >\n                    <CheckCircle className=\"h-8 w-8 text-green-500 mx-auto mb-2\" />\n                    <p className=\"text-green-400 font-medium\">Žádost byla úspěšně odeslána!</p>\n                    <p className=\"text-green-300 text-sm mt-1\">\n                      Budete informováni o výsledku prostřednictvím Discordu.\n                    </p>\n                  </motion.div>\n                )}\n\n                {submitStatus === 'error' && (\n                  <motion.div\n                    initial={{ opacity: 0, scale: 0.95 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    className=\"bg-red-950/50 border border-red-500/30 rounded-lg p-4 text-center\"\n                  >\n                    <AlertCircle className=\"h-8 w-8 text-red-500 mx-auto mb-2\" />\n                    <p className=\"text-red-400 font-medium\">Chyba při odesílání</p>\n                    <p className=\"text-red-300 text-sm mt-1\">{errorMessage}</p>\n                  </motion.div>\n                )}\n\n                \n                <form onSubmit={handleSubmit} className=\"space-y-4 sm:space-y-6\">\n                  {Object.entries(categories).map(([categoryKey, categoryQuestions]) => (\n                    <div key={categoryKey} className=\"space-y-4\">\n                      <h3 className=\"text-lg font-semibold text-white border-b border-white/10 pb-2\">\n                        {categoryLabels[categoryKey as keyof typeof categoryLabels] || categoryKey}\n                      </h3>\n                      \n                      {categoryQuestions.map((question) => (\n                        <div key={question.id} className=\"space-y-2\">\n                          {question.field_type !== 'checkbox' && (\n                            <Label htmlFor={question.field_name} className=\"text-white\">\n                              {question.question}\n                              {question.required && <span className=\"text-red-400 ml-1\">*</span>}\n                      </Label>\n                          )}\n                          {renderField(question)}\n                    </div>\n                      ))}\n                    </div>\n                  ))}\n\n                  \n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.6, delay: 0.4 }}\n                    className=\"pt-6\"\n                  >\n                    <Button\n                      type=\"submit\"\n                      disabled={isSubmitting || attemptInfo?.remainingAttempts === 0}\n                      className=\"w-full bg-gradient-to-r from-[#b90505] to-[#d40606] hover:from-[#a00404] hover:to-[#b90505] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-[#b90505]/25 hover:shadow-[#b90505]/40 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {isSubmitting ? (\n                        <div className=\"flex items-center justify-center gap-2\">\n                          <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                          Odesílání...\n                        </div>\n                      ) : (\n                        'Odeslat žádost'\n                      )}\n                  </Button>\n                    \n                    {attemptInfo?.remainingAttempts === 0 && (\n                      <p className=\"text-red-400 text-sm text-center mt-2\">\n                        Vyčerpali jste všechny pokusy na whitelist žádost\n                      </p>\n                    )}\n                  </motion.div>\n                </form>\n                </motion.div>\n              </CardContent>\n            </Card>\n          </motion.div>\n        </div>\n      </div>\n    );\n  }"],"names":[],"mappings":"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"}